webpackJsonp([2],{NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s("7+uW"),i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("transition",[e("router-view")],1)],1)},staticRenderFns:[]};var n=s("VU/8")({name:"App"},i,!1,function(t){s("idUa")},null,null).exports,a=s("/ocq"),r=s("Dd8w"),c=s.n(r);var l={data:function(){return{iconMsg:"错误",iconSize:60,iconColor:"#f00",textSize:16}},mixins:[{methods:{isObject:function(t){return""==t?"":"[object Object]"===Object.prototype.toString.call(t)}}}],props:["toastConfig"],mounted:function(){this.setMsg()},computed:{},methods:{setMsg:function(){!0===this.isObject(this.toastConfig)&&(this.iconMsg=this.toastConfig.msg||this.iconMsg,this.iconSize=this.toastConfig.size||this.iconSize,this.iconColor=this.toastConfig.color||this.textSize,this.textSize=this.toastConfig.textSize||this.textSize)}}},p={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"toast-success"},[s("div",{staticClass:"toast-panel"},[s("Icon",{attrs:{type:"ios-close-outline",size:t.iconSize,color:t.iconColor}}),t._v(" "),s("div",{style:{fontSize:t.textSize+"px",color:t.iconColor,marginTop:"10px"}},[t._v("\n              "+t._s(t.iconMsg)+"\n          ")])],1)])},staticRenderFns:[]};var u=s("VU/8")(l,p,!1,function(t){s("egU2")},null,null).exports,d=s("NYxO"),f={name:"HelloWorld",data:function(){return{value1:0,isShow:!1,isPhoneBtnShow:!1,isPasswordBtnShow:!1,ic:s("OvgM"),urls:[{url:s("OvgM")},{url:s("VTdq")}],mobile:"",password:"",toastConfig:{msg:"",color:"#fff",size:60,textSize:14}}},computed:c()({},Object(d.b)(["isLogin"]),{setLogin:function(){this.isLogin=this.$store.isLogin}}),methods:{validateMobile:function(){var t,e=""==(t=this.mobile)?"":!!/^1(3|4|5|6|7|8)[0-9]{9}$/.test(t);return!0===e||(""===e?(this.toastConfig.msg="手机号不能为空",this.setToast()):!1===e&&(this.toastConfig.msg="手机号有误",this.setToast()),!1)},validatePassword:function(){var t,e=""==(t=this.password)?"":t.length<6?-1:!!/^[0-9a-zA-Z_-]{6,}$/.test(t);return!0===e||(""===e?(this.toastConfig.msg="密码不能为空",this.setToast()):-1===e?(this.toastConfig.msg="密码不能小于6位",this.setToast()):!1===e&&(this.toastConfig.msg="密码由数字、字母、_和-组成",this.setToast()),!1)},setToast:function(t){this.isShow=!0;var e=this;setTimeout(function(){e.isShow=!1},t||2e3)},showClearBtn:function(t){"phone"===t&&(this.isPhoneBtnShow=!0),"password"===t&&(this.isPasswordBtnShow=""!=this.password)},constrainMobile:function(t){var e,s,o,i;""==this.mobile?this.isPhoneBtnShow=!1:this.showClearBtn("phone"),this.mobile=(e=t,o=s||11,i=e,e.length>o&&(i=e.substr(0,o)),i)},clearMobile:function(){this.mobile="",this.isPhoneBtnShow=!1},clearPassword:function(){this.password="",this.isPasswordBtnShow=!1},login:function(){var t=this;this.$http({url:"login.php",method:"post",data:{password:this.password,mobile:this.mobile}}).then(function(e){if("OK"===e.statusText){e.data.data;t.$store.commit("SET_USER_ID",{value:10,time:10}),t.$store.commit("SET_USER_NAME","sdfsdf"),t.$router.replace({name:"register",params:{userId:1}})}}).catch(function(t){console.log(t)})}},components:{toastError:u}},h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"wrapper"},[s("Row",{attrs:{"class-name":"log-form mb20"}},[s("Col",{attrs:{span:"2"}},[t._v(" ")]),t._v(" "),s("Col",{attrs:{span:"20"}},[s("Row",[s("Col",{attrs:{"class-name":"login-input"}},[s("label",{attrs:{for:"phone"}},[s("Icon",{attrs:{type:"person"}})],1),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.mobile,expression:"mobile",modifiers:{trim:!0}}],attrs:{type:"number",name:"mobile",id:"phone"},domProps:{value:t.mobile},on:{input:[function(e){e.target.composing||(t.mobile=e.target.value.trim())},function(e){t.constrainMobile(t.mobile)}],blur:function(e){t.$forceUpdate()}}}),t._v(" "),s("span",{on:{click:t.clearMobile}},[t.isPhoneBtnShow?s("Icon",{staticClass:"clearBtn",attrs:{type:"close-circled",size:"10"}}):t._e()],1)])],1),t._v(" "),s("Row",[s("Col",{attrs:{"class-name":"login-input"}},[s("label",{attrs:{for:"pwdtext"}},[s("Icon",{attrs:{type:"locked"}})],1),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.password,expression:"password",modifiers:{trim:!0}}],attrs:{type:"password",name:"password",id:"pwdtext"},domProps:{value:t.password},on:{input:[function(e){e.target.composing||(t.password=e.target.value.trim())},function(e){t.showClearBtn("password")}],blur:function(e){t.$forceUpdate()}}}),t._v(" "),s("span",{on:{click:t.clearPassword}},[t.isPasswordBtnShow?s("Icon",{staticClass:"clearBtn",attrs:{type:"close-circled",size:"10"}}):t._e()],1)])],1)],1),t._v(" "),s("Col",{attrs:{span:"2"}},[t._v(" ")])],1),t._v(" "),s("Row",[s("Col",{attrs:{span:"2"}},[t._v(" ")]),t._v(" "),s("Col",{attrs:{span:"20"}},[s("div",{staticClass:"cus-button active mb20",on:{click:t.login}},[t._v("登录")])]),t._v(" "),s("Col",{attrs:{span:"2"}},[t._v(" ")])],1),t._v(" "),s("Row",{attrs:{"class-name":"mb20"}},[s("Col",{attrs:{span:"2"}},[t._v(" ")]),t._v(" "),s("Col",{attrs:{span:"20"}},[s("a",{attrs:{href:"#/register"}},[s("div",{staticClass:"cus-button"},[t._v("注册")])])]),t._v(" "),s("Col",{attrs:{span:"2"}},[t._v(" ")])],1),t._v(" "),t.isLogin?s("Row",[s("Col",{attrs:{span:"7"}},[t._v(" ")]),t._v(" "),s("Col",{attrs:{span:"10","class-name":"tc forget-pwd"}},[s("div",[t._v("忘记密码 "),s("Icon",{staticClass:"self-text-color",attrs:{type:"help-circled"}})],1)]),t._v(" "),s("Col",{attrs:{span:"7"}},[t._v(" ")])],1):t._e()],1),t._v(" "),s("transition",{attrs:{name:"fade"}},[t.isShow?s("toast-error",{attrs:{"toast-config":t.toastConfig}}):t._e()],1),t._v(" "),t.isLogin?s("div",[t._v("sfsdf")]):t._e()],1)},staticRenderFns:[]};var m=s("VU/8")(f,h,!1,function(t){s("hUHM")},"data-v-1a437fbc",null).exports;o.default.use(a.a);var v=new a.a({routes:[{path:"/",name:"HelloWorld",component:m,alias:"/index"},{path:"/register/:id?",name:"register",component:function(){return s.e(0).then(s.bind(null,"q3Wa"))},meta:{requireAuth:!0}}]}),g=s("BTaQ"),w=s.n(g),_=s("//Fk"),b=s.n(_),S=s("mtWM"),C={dev:{baseApiUrl:"http://test.api.com"},prod:{baseApiUrl:"http://api.com"}}.prod,x=s.n(S).a.create({baseURL:C.baseApiUrl,timeout:1e4,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=utf-8;",Accept:"application/json;charset=utf-8;"}});x.interceptors.request.use(function(t){var e,s;return w.a.Spin.show((s=e||"需要一个吻...",{render:function(t){return t("div",{class:"loading-wrapper"},[t("Icon",{class:"loading-spin-icon-load",props:{type:"load-c",size:18}}),t("div",s)])}})),t},function(t){w.a.Spin.hide(),w.a.Message.config({top:"250"}),w.a.Message.warning("请求超时")}),x.interceptors.response.use(function(t){return w.a.Spin.hide(),t},function(t){return w.a.Spin.hide(),w.a.Message.config({top:"250"}),w.a.Message.warning("加载超时"),b.a.reject(t)});var M=x,T=s("mvHQ"),U=s.n(T);function E(t,e,s){var o=void 0;"[object Object]"===Object.prototype.toString.call(s)?(t[e]=s.value,o=s.time):t[e]=s,function(t,e,s){var o=void 0,i=void 0;if(t){if(void 0!==s){var n=parseFloat(s);if(isNaN(n))throw"wrong expire time";i=(new Date).getTime()+1e3*n}o="string"!=typeof e?U()(e):e,window.localStorage.setItem(t,U()({data:o,time:i}))}}(e,s.value,o)}var z={SET_USER_ID:function(t,e){E(t,"user_id",e)},SET_USER_TOKEN:function(t,e){E(t,"user_token",e)},SET_USER_NAME:function(t,e){E(t,"user_token",e)},SET_USER_PWD:function(t,e){E(t,"user_token",e)}};o.default.use(d.a);var y=new d.a.Store({state:{userId:"",userName:""},mutations:z});s("QYCU");o.default.use(w.a),o.default.config.productionTip=!1,o.default.prototype.$http=M,v.beforeEach(function(t,e,s){t.matched.some(function(t){return t.meta.requireAuth})?function(t){var e=void 0,s=(new Date).getTime();if(console.log(t),t)return(e=JSON.parse(window.localStorage.getItem(t)))?(console.log(e),void 0!==e.time&&e.time<s?void 0:e.data):void 0}("user_id")?s():s({path:"/",query:{redirect:t.fullPath}}):s()}),new o.default({el:"#app",router:v,store:y,components:{App:n},template:"<App/>"})},OvgM:function(t,e,s){t.exports=s.p+"static/img/1-fb535ec.fb535ec.jpg"},QYCU:function(t,e){},VTdq:function(t,e,s){t.exports=s.p+"static/img/2-34e6936.34e6936.jpg"},egU2:function(t,e){},hUHM:function(t,e){},idUa:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.ae9c886f96f14eec3e3e.js.map